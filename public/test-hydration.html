<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SSR Hydration Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
  <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8">
    <h1 class="text-3xl font-bold text-blue-600 mb-6">ESMX SSR Hydration Verification</h1>
    
    <div class="mb-6">
      <h2 class="text-xl font-semibold mb-3">Test Steps:</h2>
      <ol class="list-decimal list-inside space-y-2 text-gray-700">
        <li>Open <a href="http://localhost:3000/react" class="text-blue-500 underline" target="_blank">http://localhost:3000/react</a> in a new tab</li>
        <li>Open browser DevTools (F12) and go to Console tab</li>
        <li>Look for hydration messages:
          <ul class="list-disc list-inside ml-6 mt-2 text-sm">
            <li class="text-green-600">"[React] Hydrating from server-rendered HTML..."</li>
            <li class="text-green-600">"[React] Hydration complete - app is now interactive!"</li>
          </ul>
        </li>
        <li>Check Network tab:
          <ul class="list-disc list-inside ml-6 mt-2 text-sm">
            <li>Should see HTML document (server-rendered)</li>
            <li>Should see hydrate.mjs loaded</li>
            <li>Should see React imports from esm.sh</li>
          </ul>
        </li>
        <li>View Page Source (Ctrl+U):
          <ul class="list-disc list-inside ml-6 mt-2 text-sm">
            <li>Should see fully rendered HTML content (not just empty divs)</li>
            <li>Should see import map for React</li>
            <li>Should see hydrate.mjs script tag</li>
          </ul>
        </li>
      </ol>
    </div>

    <div class="bg-green-50 border-l-4 border-green-500 p-4 mb-6">
      <h3 class="font-semibold text-green-800 mb-2">‚úÖ Success Criteria</h3>
      <ul class="list-disc list-inside text-green-700 text-sm space-y-1">
        <li>Page loads with content immediately visible (SSR working)</li>
        <li>Console shows hydration messages (client-side JS running)</li>
        <li>No hydration mismatch warnings in console</li>
        <li>React DevTools recognizes the app</li>
      </ul>
    </div>

    <div class="bg-blue-50 border-l-4 border-blue-500 p-4">
      <h3 class="font-semibold text-blue-800 mb-2">üìã Current Server</h3>
      <p class="text-sm text-blue-700 mb-2">Server: <code class="bg-blue-100 px-2 py-1 rounded">esmx-server-manual.mjs</code></p>
      <p class="text-sm text-blue-700">Status: 
        <span id="server-status" class="font-semibold">Checking...</span>
      </p>
    </div>
  </div>

  <script>
    fetch('http://localhost:3000/api/health')
      .then(r => r.json())
      .then(data => {
        document.getElementById('server-status').textContent = `‚úÖ ${data.server} running`;
        document.getElementById('server-status').className = 'font-semibold text-green-600';
      })
      .catch(() => {
        document.getElementById('server-status').textContent = '‚ùå Server not running';
        document.getElementById('server-status').className = 'font-semibold text-red-600';
      });
  </script>
</body>
</html>
